# 安全测试

## 什么是安全测试

软件安全测试是确认软件的安全特性实现是否与预期设计一致的过程。软件安全性测试是在软件的生命周期内采取的一系列措施，用来防止出现有违反安全策略的异常情况和在软件的设计、开发、部署、升级以及维护过程钟的潜在系统漏洞。

与传统测试最大的区别在于：强调软件不应当做什么，而不是软件要做什么。

## 安全测试的目标

1. 通常的目标：内存溢出，SQL 注入/XSS，各种输入验证问题
2. 进一步的目标：访问控制，信息泄露，不充分的随机数，鉴别与加密

## 安全测试有哪些方法

- 白/灰盒测试：对软件工程文档/源代码/二进制代码进行静态分析/审核，对运行时系统进行动态监测
- 功能验证：功能验证是采用软件测试当中的黑盒测试方法，对涉及安全的软件功能，如：用户管理模块、权限管理、加密系统、认证系统等进行测试，主要验证上述功能是否有效
- 漏洞扫描：安全漏洞扫描主要是借助于特定的漏洞扫描器完成的。通过使用漏洞扫描器，系统管理员能够发现系统存在的安全漏洞，从而在系统安全中及时修补漏洞的措施。分为两种类型：主机漏洞扫描器是指在系统本地运行检测系统漏洞的程序；网络漏洞扫描器是指基于网络远程检测目标网络和主机系统漏洞的程序
- 模拟攻击：对于安全测试来说，模拟攻击测试是一组特殊的极端的测试方法，以模拟攻击来验证软件系统的安全防护能力

## cookie session token 区别

他们存在的原因是因为，http 是`无状态连接`，用户的信息需要被保存起来，也就是通过技术手段使得前后两次的请求有一定的关系。

- cookie: 类似一个令牌，装有 sessionId，存储在客户端，浏览器通常会自动添加
- session: 存储在服务器中，理解为一个状态列表，拥有一个唯一的标识符 sessionId；通常是`存放在 cookies` 中。服务器收到 cookie后解析出 sessionId，再去列表中查找对应的 session。
- token: 类似一个令牌，无状态（服务器端并不会保存用户认证相关的信息），用户信息加密到 token 中，服务器收到 token 后会解密，就能知道是哪一个用户。需要开发者手动添加。

参考《[彻底弄懂session，cookie，token](https://segmentfault.com/a/1190000017831088)》

## 如何避免 SQL 注入

- 严格限制 web 应用的数据库操作权限
- 使用正则表达式过滤字符串中的特殊字符
- 对进入数据库的特殊字符进行转义处理或者编码转换
- 所有查询语句建议使用数据库提供的参数化查询接口
- 应用发布之前建议使用专业的 sql 注入检查工具
- 避免网站打印出 sql 错误信息

## 什么是 CSRF 攻击，如何预防

定义：跨站请求伪造。攻击者利用受害者的身份，以受害者的名义发起恶意请求

预防：

1. 请求中嵌入一些额外的授权数据，区分哪些是未授权的请求
2. Synchronizer token pattern - 用户请求嵌入token，服务器验证token
3. Cookie-to-Header Token - 对于JS交互网站，token置于cookie中，js读取token，请求时将token作为header
4. 验证码 - 重要操作，需要用户输入验证码再次确认
