# 数据库

## 一张表,里面有ID自增主键,当insert了17条记录之后,删除了第15,16,17条记录,再把Mysql重启,再insert一条记录,这条记录的ID是18还是15

若是没有修改过 id 自增的初始值，则是从 18 开始，若修改为其他，则从该修改后的 id 开始

## 数据库三范式

1. 第一范式：强调的是列的原子性，即数据库表的每一列都是不可分割的原子数据列
2. 第二范式：在第一范式的基础上，非主键列完全依赖于主键，而不能依赖于主键的一部分
3. 第三范式：在第二范式的基础上，非主键列只依赖主键，不依赖于其他非主键

## 事务四性质

1. 原子性：一个事务在所有操作要么全部成功，要么全部不完成（相当于未发起事务）
2. 一致性：在事务开始前后，数据库的整体结构没有被破坏
3. 隔离性：允许并发事务对数据库进行读写和修改，而相互不影响
4. 持久性：对数据库的修改是永久的

## mysql 内连接 左连接 右连接

- 内连接：join = inner join，两表共同部分
- 左连接：left join，左表 + 匹配部分
- 右连接：right join，右表 + 匹配部分

## 最左匹配原则

mysql 会一直向右匹配直到遇到范围查询 `>`, `<`, between, like 就停止匹配。比如`where a = 1 and b = 2 and c > 3 and d = 4` 如果建立(a,b,c,d)顺序的索引，d是用不到索引的。如果建立(a,b,d,c)则可以用到 a,b,d的组合索引，并且 a,b,d 的顺序可以随意调整。

再解释一下 `a,b,c 索引` 实际上等于创建 `a 索引`，`a,b 索引`， `a,b,c 索引`

## 什么是索引，有什么用

索引的概念：

- **简单**：一种将数据库中的记录按照特殊形式存储的数据结构
- **专业**：排序列表，表中存储着索引值和包含这个值所在行的物理地址

作用：

1. 将随机 IO 变成顺序 IO
2. 帮助服务器避免排序和创建临时表
3. 大大减少服务器需要扫描的数据量
